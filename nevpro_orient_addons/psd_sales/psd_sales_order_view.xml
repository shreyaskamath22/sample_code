<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record model="ir.ui.view" id="view_psd_product_sale_order_branch">
            <field name="name">Sales Order</field>
            <field name="model">psd.sales.product.order</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string='Sales Order - Products'>
                    <group col='6' colspan='6' attrs="{'invisible':['|',('invoiced_bool','=', True),('state','not in',('partial_delivery_scheduled','delivery_scheduled'))]}">
                        <html>
                            <center><h3 style="color:green">"Delivery Schedule has been moved to Stock Management".</h3></center>
                        </html> 
                    </group>
                <group col='6' colspan='6' attrs="{'invisible':[('invoiced_bool','=', False)]}">
                        <html>
                            <center><h3 style="color:green">"Invoice Preview has been created for this Delivery Order under Accounting Module".</h3></center>
                        </html> 
                    </group>
                    <newline/>                   
                    <field name="state" widget="statusbar" statusbar_colors='{"new":"red"}'/>
                    <newline/>
                    <separator colspan="4"/>
                    <newline/>
                    <group attrs="{'invisible':[('state','!=','ordered')]}">
                            <html>
                                <center><h3 style="color:green">"Please go to the Delivery Schedule Tab to create &amp; process the Delivery Order".</h3></center>
                            </html> 
                    </group>
                    <group colspan="4" col="8">
                    <group col="4">
                        <field name="invoiced_bool" invisible="1"/>
                        <field name="name" colspan="4" readonly="1"/>
                        <field name="partner_id" invisible="1"/>
                        <field name="psd_quotation_id" invisible="1"/>
                        <field name="delivery_location_id" colspan="4" readonly="1"/>
                        <field name="quotation_no" colspan="2" readonly="1"/>
                        <field name="against_free_replacement" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                    <!--     <field name="erp_order_no" readonly="1" />
                        <field name="erp_order_date" readonly="1" /> -->
                        <field name="is_quotation_no" invisible="1"/>
<!--                         <field name="web_order_no" readonly="1"/>
                        <field name="web_order_date" readonly="1"/> -->
<!--                         <field name="against_form" on_change="onchange_against_form(against_form)" 
                           attrs="{'readonly':[('state','not in',['new','pending'])]}" colspan="4"/> -->
                        <field name="skus" invisible="1"/>
                        <field name="generic" invisible="1"/>
                        <field name="document" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                        <!-- <field name="tax_type"  on_change="onchange_tax_type(tax_type)" 
                            attrs="{'readonly':[('state','not in',['new'])]}"/>
                        <field name="no_of_service" attrs="{'invisible':[('tax_type','!=','composite')],'readonly':[('state','not in',['new'])]}"/> -->
                        <newline/>
                        
                    </group>
                    <group col="4">
                        <field name="contact_person" colspan="2" readonly="1"/>
                        <field name="user_id" string="Created By" colspan="2" readonly="1"/>
                        <field name="billing_location_id" required="1" colspan="3" domain="[('partner_id','=',partner_id)]" attrs="{'readonly':[('state','not in',['new','pending'])]}" on_change="onchange_billing_location_id(billing_location_id)"/>
                        <label string="" colspan="1"/>
                        <!-- <field name="pse_id" colspan="2" readonly="1"/> -->
                        <field name="request_id" colspan="2" readonly="1"/>
                        <!-- <field name="expected_delivery_date" colspan="3" attrs="{'readonly':[('state','=','ordered')]}"/>
                        <label string="" colspan="1" attrs="{'readonly':[('state','=','ordered')]}"/> -->
                        <field name="coupon_code" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                        <field name="gift_voucher" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                        <field name="po_no" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                        <field name="po_date" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                        <field name="attachment" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                        <field name="bird_pro" on_change="onchange_bird_pro(bird_pro)" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                        <field name="done_products" invisible="1"/>
                        <field name="bool1" invisible="1"/>
                        <newline/>
                    </group>
                    </group>  
                    <newline/>
                    <notebook colspan="8">
                        <page string='Product Order'>
                        <field name="psd_sales_product_order_lines_ids" nolabel="1" colspan="8"
                            attrs="{'readonly':[('state','not in',['new','pending'])]}" context="{'nocreate':1,'nodelete':1}">
                            <tree editable="bottom" string="Locations &amp; Products">
                                <field name="exempted" invisible="1"/>
                                <field name="company_id" invisible="1"/>
                                <field name="product_name_id"  width="10" required="1"
                                    domain="[('is_imported','=',True),('psd_sale','=',True)]"/>
 <!--                                <field name="sku_name_id" required="1"
                                       on_change="onchange_sku_name_id(product_name_id,sku_name_id)" domain="[('generic_name','=',product_name_id),('other_type','=','sale')]"/> -->
                                <field name="specification"/>
                                <!-- <field name="ordered_quantity" required="1"/> -->
                                <field name="allocated_quantity" readonly="1"/>
                                <!-- <field name="product_uom_id" readonly="1"/> -->
                                <field name="track_equipment" invisible="1"/>
                                <field name="extended_warranty" invisible="1"
                                       attrs="{'readonly':[('track_equipment','=',False)]}"/>
                                <field name="product_mrp"/>
                                <field name="product_basic_rate"/>
                                <field name="discount" invisible="1" string="Additional Amount"/>
                                <field name="discounted_amount" readonly="1" string="Total Basic"/>
                                <field name="against_form_check" invisible="1"/>
                                <!-- <field name="tax_id" string="TAX" attrs="{'readonly':[('against_form_check','=',True)]}"/> -->
                                <field name="hsn_code"/>
                                <field name="cgst_rate"/>
                                <field name="cgst_amount" invisible="1"/>
                                <field name="sgst_rate"/>
                                <field name="sgst_amount" invisible="1"/>
                                <field name="igst_rate"/>
                                <field name="igst_amount" invisible="1"/>
                                <field name="tax_amount" readonly="1"/>
                <!--                 <field name="discounted_value" invisible="1"/> 
                                <field name="discounted_price" invisible="1"/> -->
                                <field name="total_amount" readonly="1"/>
                                <field name="done_products" invisible="1"/>
                                <field name="batch_number" invisible="1"/>
                                <field name="manufacturing_date" invisible="1"/>
                                <field name="erp_order_no_ref" invisible="1"/>
                                 <field name="msg_check_read" invisible="1"/>
                                <field name="msg_check_unread" invisible="1"/>
                                <button icon='create' name="show_notes" type="object" attrs="{'invisible':['|','|',('msg_check_read','!=',False),('msg_check_unread','!=',False)]}"/>
                                <button icon='read-msg' name="show_notes" type="object" attrs="{'invisible':[('msg_check_read','=',False)]}"/>
                                <button icon='unread-msg' name="show_notes" type="object" attrs="{'invisible':[('msg_check_unread','=',False)]}"/> 
                        </tree>
                        </field>
<group>
                                     <group col="4">
                                        <label string="" colspan="1"/>
                                        <label string="" colspan="1"/>
                                        <label string="" colspan="1"/>
                                        <label string="" colspan="1"/>
                                        <label string="" colspan="1"/>
                                     </group>      
                                    <group col="4">
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <field name="order_total_amount" readonly="1"/><newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <field name="install_maintain_charges" readonly="0"  attrs="{'required':[('bird_pro','=',True)],'invisible':[('bird_pro','=',False)],'readonly':[('state','not in',['new','pending'])]}"/><newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <newline/>
                                        <label string="" colspan="2"/><label string="" colspan="1"/>
                                        <field name="tax_one2many" nolabel="1" widget="one2many_list"  context="{'nocreate':1,'nodelete':1}" attrs="{'readonly':True}">
                                           <tree string="Tax" editable="top">   
                                               <field name="name"/>
                                               <field name="amount"/>
                                               <field name="account_tax_id" invisible="1"/>
                                           </tree>
                                        </field>
                                        <label string="" colspan="2"/><label string="" colspan="1"/>
                                        <newline/>
                                        <!-- <field name="order_total_vat" readonly="1" invisible="1"/> -->
                                        <field name="invoiced_amount" readonly="1" invisible="1"/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <separator colspan="2"/><newline/>
                                        <label string="" colspan="2"/><label string="" colspan="1"/>
                                        <newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <field name="subtotal" readonly="1" invisible="1"/><newline/>
                                        <label string="" colspan="2"/><label string="" colspan="1"/>
                                        <newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <field name="product_discount" invisible="1" attrs="{'readonly':['|',('is_quotation_no','=',True),('state','in',('ordered','partial_delivery_scheduled','delivery_scheduled','delivered','cancelled'))]}"/><newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <field name="product_discount_amount" invisible="1" readonly="1"/>
                                        <newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <field name="total_amount_paid" readonly="1"/><newline/>
                                        <label string="" colspan="2"/><label string="" colspan="1"/>
                                        <newline/>
                                    </group>
                                    <newline/>
                                    
                                </group>
                        
                        </page>                        
                        <page string='Commercial Terms'>
                            <group col="4" colspan="4">
                                <field name="payment_terms" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                                <field name="transportation" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                                <newline/>
                                <field name="bank_charges" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                                <field name="despatch_schedule" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                                <field name="warranty" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                                <field name="installation" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                                <newline/>
                                <field name="octroi" attrs="{'readonly':[('state','not in',['new','pending'])]}"/>
                            </group>
                        </page>
                         <page string='Delivery Schedule'  
                            attrs="{'invisible':[('state','not in',['ordered','partial_delivery_scheduled','delivery_scheduled','delivered'])]}">
                            <group>
                                <group>
                                    <field name="expected_delivery_date" attrs="{'required':[('state','=','ordered')]}"/>
                                    <button name="create_product" string="Create" type="object" />
                                </group>
                                <group colspan="1">
                                </group>
                            </group>
                            <newline/>
                             <group>
                                <group>
                                    <field name="select_all_orders" 
        on_change="onchange_select_all_orders(select_all_orders,delivery_schedule_ids)" readonly="1"/>
                                    <label string="" colspan="1"/>
                                    <label string="" colspan="1"/> 
                                </group>
                                <group colspan="1">
                                </group>
                            </group>
                            <field name="delivery_schedule_ids" nolabel="1" colspan="8" 
                                context="{'nocreate':1}">
                            <tree string="Delivery Schedule" editable="bottom" colors="red:state=='draft';green:state=='assigned';purple:state=='confirmed';grey:state=='invoiced';orange:state=='delivered';black:state=='cancel';">
                                <field name="select"  readonly="1"/>
                                <field name="delivery_order_no" readonly="1"/>
                                <field name="delivery_order_date" readonly="1"/>
                                <field name="despatcher" readonly="1"/>
                                <!-- <field name="expected_delivery_date" readonly="1"/> -->
                                <field name="delivery_challan_no" readonly="1"/>
                                <field name="delivery_date" readonly="1"/>
                                <field name="amount" readonly="1"/>
                                <field name="state" readonly="1"/>
<!--                                 <field name="igst_amount"/>
                                <field name="cgst_amount"/>
                                <field name="sgst_amount"/>
                                <field name="igst_rate"/>
                                <field name="cgst_rate"/>
                                <field name="sgst_rate"/> -->
                            </tree>
                            <form string="Delivery Schedule">
                                <field name="state" widget="statusbar" readonly="1"/>
                                <newline/>
                                <group col="4">                                
                                <field name="godown" readonly="1"/> 
                                <field name="delivery_order_no" readonly="1"/>
                                <field name="delivery_order_date" readonly="1"/>
                                <field name="despatcher" readonly="1"/>
                                <!-- <field name="expected_delivery_date" readonly="1"/> -->
                                <field name="delivery_challan_no" readonly="1"/>
                                <field name="delivery_date" readonly="1"/>
                                <field name="bird_pro" attrs="{'invisible':[('bird_pro','=',False)]}" readonly="1"/>
                                </group>
                                <!-- <field name="state" readonly="1"/> -->
                               <!--  
                               <field name="godown" readonly="1"/> -->
                                <newline/>
                                <field name="scheduled_delivery_list" colspan="8" nolabel="1">
                                  <tree string="Product List" editable="bottom">
                                        <field name="sale_order_id" invisible="1"/>
                                        <field name="sale_order_line_id" invisible="1"/>
                                        <field name="product_name_id" readonly="1"/>
                                        <!-- <field name="sku_name_id" readonly="1"/> -->
                                        <field name="specification" invisible="1"/>
                                        <!-- <field name="ordered_quantity" readonly="1"/> -->
                                        <field name="allocated_quantity"/>
                                        <field name="godown"/>
                                        <field name="product_mrp" readonly="1"/>
                                        <field name="batch_no" invisible="1"/>
                                        <field name="tax_id" readonly="1"/>
                                        <field name="tax_amount" readonly="1"/>
           <!--                              <field name="discounted_value" invisible="1"/>
                                        <field name="discount" readonly="1"/>
                                        <field name="discounted_price" invisible="1"/>
                                        <field name="discounted_amount" readonly="1"/> -->
                                        <field name="mrp_date" readonly="1"/>
                                        <field name="total_amount" readonly="1"/>
                                    </tree>
                                </field>
                                
                                <group>
                                    <group col="4">
                                        <label string="" colspan="1"/>
                                        <label string="" colspan="1"/>
                                        <label string="" colspan="1"/>
                                        <label string="" colspan="1"/>
                                        <label string="" colspan="1"/>
                                     </group>      
                                    <group col="4" colspan="4">
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <field name="product_cost" readonly="1"/><newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <field name="bird_pro_charge" attrs="{'invisible':[('bird_pro','=',False)]}" readonly="1"/><newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <field name="tax_one2many" nolabel="1" widget="one2many_list"  context="{'nocreate':1,'nodelete':1}" attrs="{'readonly':True}">
                                           <tree string="Tax" editable="top">   
                                               <field name="name" />
                                               <field name="amount"/>
                                               <field name="account_tax_id" invisible="1"/>
                                           </tree>
                                        </field>    
                                        <newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <newline/>
                                        
                                        <!-- <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <field name="total_vat" readonly="1"/><newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <newline/>
                                        
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <field name="total_st" readonly="1"/><newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <newline/> -->
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <field name="amount" string="Grand Total" readonly="1"/><newline/>
                                        <label string="" colspan="1"/><label string="" colspan="1"/>
                                        <newline/>
                                    </group>
                                </group>
                            </form>
                            </field>
                              <group>
                                <group>
                                    <button name="move_to_stock" string="Move to Stock Management" type="object" context="{'active_id':active_id}"  attrs="{'invisible':['|',('state','not in',('ordered','partial_delivery_scheduled','delivery_scheduled')),('bool1','=', True)]}"/>
                                    <label string="" colspan="1"/>
                                     <button name="psd_process_order" string="Push to Invoice" icon="gtk-go-forward" type="object" attrs="{'invisible':['|',('bool1','=',False),('invoiced_bool','=', True)]}"/>
                                </group>
                                <group colspan="1">
                                </group>
                            </group>
                        </page>
                        <page string="Invoice History">
                            <field name="product_invoice_id" nolabel="1" context="{'nocreate':1,'nodelete':1}">
                                <tree>
                                    <field name="invoice_number"/>
                                    <field name="invoice_date"/>
                                    <!-- <field name="delivery_note_no" string="Delivery No"/> -->
                                    <!-- <field name="delivery_note_date" string="Delivery Date"/> -->
                                    <!-- <field name="basic_charge"/> -->
                                    <!-- <field name="order_total_vat" string="Tax Amount"/> -->
                                    <!-- <field name="product_order_grand_total" string="Invoice Amount"/> -->
                                    <field name="status"/>
                                    <!-- <field name="is_product_invoice" invisible="1"/> -->
                                </tree>
                                <form string="Product Invoice">
                                        <field name="status" widget="statusbar" nolabel="1"/>
                                        <newline/>
                                        <field name="opening_balance_first_import" invisible="1"/>
                                        <group col="8" colspan="4">
                                            <group col="4">
                                    <field name="cust_name" colspan="4" readonly="1"/>
                                    <!-- <field name="against_form" readonly="1" colspan="4"/> -->
                                    <!-- <field name="delivered_by" readonly="1" colspan="4"/> -->
                                    <!-- <field name="pse" readonly="1" colspan="4"/> -->
                                    <!-- <field name="expected_delivery_date" readonly="1" colspan="4"/> -->
                                    <!-- <field name="delivery_address" readonly="1" colspan="4"/> -->
                                    <field name="partner_id" invisible="1"/>
                                    <field name="contract_no" attrs="{'readonly':['|',('invoice_number','!=',False),('adhoc_invoice','=',False)]}" invisible="1"/>
                                    <field name="cce" context="{'default_cce':True}"
                                      attrs="{'readonly':['|',('invoice_number','!=',False),('adhoc_invoice','=',False)]}" invisible="1"/>
                                    <field name="payment_term" on_change="custom_pay_term(payment_term)"
                                      attrs="{'readonly':['|',('invoice_number','!=',False),('adhoc_invoice','=',False)]}" invisible="1"/>

                                    <field name="purchase_order_number" attrs="{'readonly':['|',('invoice_number','!=',False),('adhoc_invoice','=',False)]}" invisible="1"/>
                                    <field name="invoice_period_from" string="Invoice Period From" attrs="{'readonly':[('invoice_number','!=',False)]}" invisible="1"/>
                                    <field name="invoice_period_to" attrs="{'readonly':[('invoice_number','!=',False)]}" invisible="1"/>
                                    <field name="add_custom_payterm"
                                      attrs="{'invisible':[('bool_custom_payterm','=',False)],'readonly':['|',('invoice_number','!=',False),('adhoc_invoice','=',False)]}" invisible="1"/>
                                  </group>
                                  <group col="4">
                                    <field name="invoice_number" readonly="1" colspan="2"/>
                                    <field name="invoice_date" readonly="1" colspan="2"/>
                                   <!--  <field name="po_ref" readonly="1" colspan="2"/>
                                    <field name="po_ref_date" readonly="1" colspan="2"/> -->
                                    <!-- <field name="delivery_note_no" colspan="2" readonly="1"/> -->
                                    <!-- <field name="delivery_note_date" readonly="1" colspan="2"/> -->
                                 <!--    <field name="erp_order_no" colspan="2" readonly="1"/>
                                    <field name="erp_order_date" readonly="1" colspan="2"/> -->
                   <!--                  <field name="web_order_no" colspan="2" readonly="1"/>
                                    <field name="web_order_date" readonly="1" colspan="2"/>  -->         
                                    <!-- <field name="billing_location" readonly="1" colspan="3"/> -->
                                    <label string="" colspan="1"/>
                                    <field name="bool_custom_payterm" invisible="1"/>
                                    <field name="billing_term" attrs="{'readonly':[('invoice_number','!=',False)]}" invisible="1"/>
                                    <field name="service_classification" attrs="{'readonly':[('adhoc_invoice','!=',True)]}" invisible="1"/>
                                    <field name="check_previous_history" invisible="1"/>
                                    <!--field name="invoice_period_to" attrs="{'readonly':[('invoice_number','!=',False)]}"/-->
                                    <field name="invoice_due_date" attrs="{'readonly':[('invoice_number','!=',False)]}" invisible="1"/>
                                    <field name="cse_char" attrs="{'readonly':['|',('invoice_number','!=',False),('adhoc_invoice','=',False)]}" invisible="1"/>
                                    <!-- <field name="location" on_change="change_location(location)" /> -->
                                    <field name="is_transfered" invisible="1"/>
                                    <!-- <field name="invoice_no_generated" invisible="1"/> -->
                                    <field name="bool_name_check" invisible="1"/>
                                    <field name="report_name_display" attrs="{'invisible':[('bool_name_check','=',False)]}" invisible="1"/>
                                    <field name="total_cp" invisible="1" />
                                    <!--field name="cse_new" readonly="1" attrs="{'invisible':[('adhoc_invoice','=',False)]}"/-->
                                    <field name="exempted" invisible="1"/>
                                    <field name="adhoc_invoice" invisible="1"/>
                                    <field name="is_ipm" invisible="1"/>
                                    <field name="ipm_not_ipm" invisible="1" />
                                    <field name="import_flag" invisible="1"/>
                                    </group>
                                    </group>
                                    <field name="invoice_line_adhoc_ipm" invisible="1" >
                                        <tree>
                                            <field name="name"/>
                                            <!-- <field name="rate"/> -->
                                            <field name="unit"/>
                                            <field name="area"/>
                                            <field name="amount"/>
                                        </tree>
                                    </field>
                                    <field name="invoice_adhoc_ipm_line" invisible="1" >
                                            <tree>
                                                <field name="pms"/>
                                                <field name="pms_narration"/>
                                                <!-- <field name="rate"/> -->
                                                <field name="unit"/>
                                                <field name="area"/>
                                                <field name="amount"/>
                                            </tree>
                                    </field>
                                        
                                <label string="Adhoc-Invoice" colspan="1" attrs="{'invisible':[('adhoc_invoice','=',False)]}" />  
                                <label string="Standard-Invoice" colspan="1" attrs="{'invisible':[('adhoc_invoice','=',True)]}" />  <label string="" colspan="1"/><label string="" colspan="1" />       
                        <!--        Notebook Start      -->

                                  <notebook colspan="4">
                                    <page string="Product Details">
                                       <!--  <field colspan="2" name="product_invoice_lines" nolabel="1" widget="one2many_list">
                                            <tree string="Invoice Line" editable="top"> -->
                                                <!-- <field name="product_code" invisible="1"/> -->
                                                <!-- <field name="product_id"/> -->
                                                <!-- <field name="ordered_quantity"/> -->
                                                <!-- <field name="product_uom"/> -->
                                                <!-- <field name="batch" domain="[('batch_no','=',product_name.batch)]"/> -->
                                                <!-- <field name="exp_date"/> -->
                                                <!-- <field name="rate"/> -->
                       <!--                          <field name="discount"/>
                                                <field name="discounted_value" invisible="1"/>
                                                <field name="discounted_price" invisible="1"/>
                                                <field name="discounted_amount" readonly="1"/> -->
      <!--                                           <field name="tax_id" readonly="1"/>
                                                <field name="tax_amount" readonly="1"/>                        
                                                <field name="total_amount" readonly="1"/>
                                    </tree>
                                    </field> -->
                                    <newline/>
                                        <group>
                                             <group col="4">
                                                <label string="" colspan="1"/>
                                                <label string="" colspan="1"/>
                                                <label string="" colspan="1"/>
                                                <label string="" colspan="1"/>
                                                <label string="" colspan="1"/>
                                             </group>      
                                            <group col="4">
                                                <label string="" colspan="1"/><label string="" colspan="1"/>
                                                <!-- <field name="basic_charge" readonly="1"/><newline/> -->
                                                <label string="" colspan="1"/><label string="" colspan="1"/>
                                                <newline/>
                                                <!-- <label string="" colspan="2"/><label string="" colspan="1"/>
                                                <field name="tax_one2many" nolabel="1" widget="one2many_list"  context="{'nocreate':1,'nodelete':1}" attrs="{'readonly':True}">
                                                   <tree string="Tax" editable="top">   
                                                       <field name="name" />
                                                       <field name="amount"/>
                                                   </tree>
                                                </field>
                                                <label string="" colspan="2"/><label string="" colspan="1"/>
                                                <newline/> -->
                                                <label string="" colspan="1"/><label string="" colspan="1"/>
                                                <!-- <field name="order_total_vat" readonly="1"/><newline/> -->
                                                <label string="" colspan="2"/><label string="" colspan="1"/>
                                                <newline/> 
                                                <label string="" colspan="1"/><label string="" colspan="1"/>
                                                <!-- <field name="product_order_grand_total" readonly="1"/><newline/> -->
                                                <label string="" colspan="2"/><label string="" colspan="1"/>
                                                <newline/>
                                            </group>
                                        </group>
                                        </page>

                                        <page string="Transport Details">
                                                <group col="4" colspan="4">
                                                        <!-- <field name="total_weight" /> -->
                                                        <!-- <field name="estimated_value" /> -->
                                                        <!-- <field name="freight_amount" /> -->
                                                        <!-- <field name="mode_transport" /> -->
                                                        <!-- <field name="person_name" readonly="1"/> -->
                                                        <!-- <field name="transporter"/> -->
                                                        <!-- <field name="vehicle_no"/> -->
                                                        <!-- <field name="driver_name"/> -->
                                                        <!-- <field name="mobile_no"/> -->
                                                        <!-- <field name="lr_no"/>
                                                        <field name="lr_date"/> -->
                                                </group>
                                        </page>
                                            
                                            <!-- For Adhoc Invoice End -->
                       <!--                  <page string="Serial No. Details">
                                            <field name="transfer_series_ids" nolabel="1" readonly="1">
                                                <tree string="Serial No. Details">
                                                    <field name="product_name"/> -->
                                                    <!-- <field name="product_uom"/> -->
                                    <!--                 <field name="serial_no"/>
                                                    <field name="batch"/>
                                                    <field name="from_date"/>
                                                    <field name="due_date"/> -->
                                                    <!-- <field name="duration"/> -->
                          <!--                       </tree>
                                            </field>
                                        </page> -->
                                <page string="Notes">
                                <field name="comment_line_o2m" widget="one2many_list" nolabel="1" colspan="3" readonly="1">
                                        <tree string="Comments">
                                            <field name="user_name" />
                                            <field name="comment_date" />
                                            <field name="comment" />
                                            <field name="comment_line_id" invisible="1"/>
                                        </tree>
                                    </field>
                                    
                                    <newline/>
                                    <separator string="" colspan="4"/>
                                    <group col="8" colspan="8">
                                        <field name="comment_remark" colspan="4" />
                                        <button string="Add Notes" name="post_comment" type="object" colspan="1"/>
                                        <label string="" colspan="3"/>
                                    </group>
                                    </page>

                                <page string="IPM" invisible="1">
                                <field name="invoice_line_ipm" widget="one2many_list" nolabel="1" colspan="3" readonly="1">
                                        <tree string="IPM">
                                            <field name="location"/>
                                            <field name="pms"/>
                                            <!-- <field name="rate" /> -->
                                            <field name="unit"/>
                                            <field name="area" />
                                            <field name="amount"/>
                                        </tree>
                                    </field>
                                </page>
                            </notebook>
                                        
                        <!--        Notebook End        -->
                        <!-- Cancel boolean and narration -->
                                        <field name="branch_id" invisible="1"/>
                                        <group col="8" colspan="8"> <!--Invoice Cancellation-->
                                            <field name="canceled_date" colspan="2" attrs="{'invisible':['|',('cancel_boolean','=',False),('status','in',('paid','writeoff'))]}" />
                                            <field name="cancel_reason" colspan="5" attrs="{'invisible':['|',('cancel_boolean','=',False),('status','in',('paid','writeoff'))]}"/>

                                            <button name="cancel_invoice" string="Cancel" type="object" colspan="0.5" icon="gtk-cancel" confirm="Do you want to cancel?" invisible="0" attrs="{'invisible':['|',('cancel_boolean','=',False),('status','in',('paid','writeoff','cancelled'))]}" />
                                        </group>
                                        <newline/>

                                      <!--   <group col="8" colspan="8"> --> <!-- Adhoc Invoice Cancellation-->
                                            <!-- <field name="cancel_boolean" colspan="0.5" attrs="{'invisible':['|',('status','in',('paid','writeoff','cancelled')),('invoice_no_generated','!=',True)]}"/>
                                        </group> -->
                                        <newline/>
                                        
                                        <newline/>
                                                 <group col="8" colspan="8">
                                                    <field name="invoice_narration" />
                                    <!--   <button name="psd_print_invoice" string="Print" type="object" colspan="1" icon="STOCK_PRINT" attrs="{'invisible':[('invoice_no_generated','!=',True)]}"/> -->                         
                                                    <button name="generate_product_invoice" string="Generate Invoice" icon="gtk-ok" type="object" attrs="{'invisible':[('invoice_number','!=',False)]}" colspan="1"/>
                                                    <button name="receipt" string="Receipt" type="object" colspan="1" icon="gtk-open" attrs="{'invisible':['|',('status','in',('paid','writeoff')),('invoice_number','=',False)]}"/>
                                                    <button name="cancel_button" string="Cancel" type="object" colspan="1" icon="gtk-cancel" attrs="{'invisible':[('invoice_number','!=',False)]}" confirm="Do you want to cancel?" invisible="0"/>
                                                <newline/>
                                            </group>
                                                 
                        <!-- Cancel boolean and narration -->
                                                 
                                    </form>
                            </field>
                        </page>

                        <!-- Operation History -->
                        <page string="Operation History">
                            <field name="history_line" colspan="2" nolabel="1" readonly="1">
                                <tree string="Job History">
                                  <field name="contract_no" invisible="1"/>
                                    <field name="job_id"/>
                                    <field name="job_schedule_date"/>
                                    <field name="job_reschedule_date" invisible="1"/>
                                    <field name="record_date"/>
                                    <field name="no_hr_wasted" invisible="1"/>
                                    <field name="reschedule_by"/>
                                    <field name="reason_for_rescheduling"/>
                                    <field name="technician_squad"/>
                                    <field name="job_start_date"/>
                                    <field name="job_end_date"/>
                                    <field name="job_status"/>
                                </tree>
                                     </field>
                            <newline/>
                            </page>
                            <!-- END -->

                        <page string='Notes'>
                        <field name="notes_one2many" widget="one2many_list" nolabel="1" colspan="8" readonly="1">
                           <tree string="Remarks">
                                <field name="user_name"/>
                                <field name="date"/>
                                <field name="source"/>
                                <field name="name"/>
                            </tree>
                            <form>
                                    <group col="4" colspan="6">
                                        <group>
                                        <field name="user_name" />
                                        </group>
                                        <group>
                                        <field name="source"/>
                                        </group>
                                        <group>
                                        <field name="date"/>
                                        </group>
                                        </group>
                                        <field name="name"/>
                            </form>
                        </field>
                            <group col="8" colspan="8"> 
                            <field name="notes" colspan="4"/>
                            <button name="psd_post_notes" string="Add Notes"  type="object"  colspan="1" /> 
                            <label string="" colspan="3"/>
                            </group>
                        </page>                      
                    </notebook>
                   <newline/>
                <group colspan="12" col="8">
                    <group colspan="4">
                        <field name="cancel_order" attrs="{'readonly':[('state','=','cancelled')],'invisible':[('state','in',('new','pending','delivered','cancelled'))]}" colspan="1"/>
                        <label string="" colspan="2"/>
                        <label string="" colspan="2"/>
                        <newline/>
                        <field name="reason_for_cancellation" colspan="4" attrs="{'invisible':[('cancel_order','=',False)],'required':[('cancel_order','=',True)],'readonly':[('state','=','cancelled')]}"/>
                    </group>
                    <label string="" colspan="2"/>
                    <label string="" colspan="2"/>
                    <button name="cancel" type="object" string="Cancel Order" colspan="0.5" 
                     attrs="{'invisible':['|',('cancel_order','=',False),('state','=','cancelled')]}"/>
                    <label string="" colspan="2"/>
                    <label string="" colspan="2"/>
                    <label string="" colspan="2"/>
                    <label string="" colspan="2"/>
<!--                      <button name="calculate_sales_order" type="object" string="Calculate" colspan="0.5" attrs="{'invisible':['|',('state','not in',['new','pending']),('quotation_no','!=',None)]}"/> -->
                     <button name="calculate_sales_order" type="object" string="Calculate" colspan="0.5" attrs="{'invisible':['|',('state','not in',['new','pending'])]}"/>
                    <button name="generate_sales_order" type="object" string="Generate Order" colspan="0.5" icon="gtk-add" attrs="{'invisible':['|',('state','not in',['new','pending'])]}" confirm="Are you sure you want to generate Sales Order?"/> 
                    <button name="cancel_order" type="object" string="Cancel" attrs="{'invisible':[('state','!=','new')]}" confirm="This Order will be deleted" colspan=".5"/>
                    <label string="" colspan="2"/>
                    <label string="" colspan="2"/>
                    <label string="" colspan="2"/>
                </group>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_view_psd_product_sale_order_branch">
            <field name="name">Sales Order - Product</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">psd.sales.product.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_psd_product_sale_order_branch"/>
        </record>



        <!-- Sale order Lines Form View -->
        <record id="view_psd_product_sale_order_line_branch" model="ir.ui.view">
            <field name="name">Sales Order Line</field>
            <field name="model">psd.sales.product.order.lines</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form string="Stock Transfer">
                <group>
                    <button string="Save" name="save_notes" type="object" colspan="0.5"/>
                    <label string="" colspan="3.5"/>
                </group>
                    <newline/>
                <field name="product_name_id" width="10" required="1"/>
                <!-- <field name="sku_name_id" required="1"
                       on_change="onchange_sku_name_id(product_name_id,sku_name_id,exempted)"/> -->
                <field name="exempted" invisible="1"/>
                <!-- <field name="ordered_quantity"/> -->
                <field name="allocated_quantity" readonly="1"/>
                <!-- <field name="product_uom_id" readonly="1"/> -->
                <field name="extended_warranty"/>
                <field name="product_mrp" readonly="1"/>
                <field name="product_basic_rate" readonly="1"/>
                <!-- <field name="tax_id" attrs="{'readonly':[('exempted','=',True)]}"/> -->
                <field name="tax_amount" readonly="1"/>
                <newline/>
                <newline/>
                <group col="8" colspan="8">
               <field name="notes_one2many" widget="one2many_list" nolabel="1" colspan="3">
                <tree string="Comments">
                    <field name="user_id"/>
                    <field name="source"/>
                    <field name="comment_date"/>
                    <field name="comment"/>
                </tree>
                <form string="Comments">
                    <field name="user_id" invisible="1"/>
                    <field name="source" invisible="1"/>
                    <field name="comment_date" invisible="1"/>
                    <field name="comment"/>
                </form>
        </field>
                </group>
                </form>
            </field>
        </record>
</data>
</openerp>
